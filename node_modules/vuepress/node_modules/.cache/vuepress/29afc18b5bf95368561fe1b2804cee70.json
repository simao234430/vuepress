{"remainingRequest":"/Users/simao/javascript_code/vuepress/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!/Users/simao/javascript_code/vuepress/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/simao/javascript_code/vuepress/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/simao/javascript_code/vuepress/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/simao/javascript_code/vuepress/docs/java/deploy.md?vue&type=template&id=1c0122f6&","dependencies":[{"path":"/Users/simao/javascript_code/vuepress/docs/java/deploy.md","mtime":1550041214206},{"path":"/Users/simao/javascript_code/vuepress/node_modules/cache-loader/dist/cjs.js","mtime":1550030168216},{"path":"/Users/simao/javascript_code/vuepress/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1550030169776},{"path":"/Users/simao/javascript_code/vuepress/node_modules/cache-loader/dist/cjs.js","mtime":1550030168216},{"path":"/Users/simao/javascript_code/vuepress/node_modules/vue-loader/lib/index.js","mtime":1550030169776},{"path":"/Users/simao/javascript_code/vuepress/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":1550030173624}],"contextDependencies":[],"result":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_vm._ssrNode(\"<h1 id=\\\"deploy\\\"><a href=\\\"#deploy\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Deploy</h1> <h2 id=\\\"default-scheme\\\"><a href=\\\"#default-scheme\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Default Scheme</h2> <p>Umi@2 is friendly to newbies by default, so it does not load on-demand by default. After <code>umi build</code>, it outputs three files: <code>index.html</code>, <code>umi.js</code> and <code>umi.css</code>.</p> <h2 id=\\\"do-not-output-html-files\\\"><a href=\\\"#do-not-output-html-files\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Do Not Output HTML Files</h2> <p>Some scene html files are handed to the backend output. The frontend build does not need to output html files. The environment variable <code>HTML=none</code> is configurable.</p> <div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code>$ HTML<span class=\\\"token operator\\\">=</span>none umi build\\n</code></pre></div><h2 id=\\\"deploy-html-to-a-non-root-directory\\\"><a href=\\\"#deploy-html-to-a-non-root-directory\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Deploy HTML to a Non-Root Directory</h2> <p>I often have students asking this question:</p> <blockquote><p>Why is my local development good, no response after deployment, and no error?</p></blockquote> <p><strong>No error!</strong> This is a typical phenomenon where an application is deployed on a non-root path. Why do you have this problem? Because the route does not match, for example, if you deploy the application under <code>/xxx/</code> and then access <code>/xxx/hello</code>, and the code matches <code>/hello</code>, then it will not match, but there is no definition. A fallback route, such as 404, will display a blank page.</p> <p>How to deal with it?</p> \"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"Can be solved by configuring \"),_c('router-link',{attrs:{\"to\":\"/config/#base\"}},[_vm._v(\"base\")]),_vm._ssrNode(\".\")],2),_vm._ssrNode(\" <div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code><span class=\\\"token function\\\">export</span> default <span class=\\\"token punctuation\\\">{</span>\\n  base: <span class=\\\"token string\\\">'/path/to/your/app/root'</span>,\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><h2 id=\\\"use-hashhistory\\\"><a href=\\\"#use-hashhistory\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Use hashHistory</h2> \"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"This can be solved by configuring \"),_c('router-link',{attrs:{\"to\":\"/config/#history\"}},[_vm._v(\"history\")]),_vm._ssrNode(\" for <code>hash</code>.\")],2),_vm._ssrNode(\" <div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code><span class=\\\"token function\\\">export</span> default <span class=\\\"token punctuation\\\">{</span>\\n  history: <span class=\\\"token string\\\">'hash'</span>,\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><h2 id=\\\"load-on-demand\\\"><a href=\\\"#load-on-demand\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Load on Demand</h2> \"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"To implement on-demand loading, load the umi-plugin-react plugin and configure \"),_c('router-link',{attrs:{\"to\":\"/plugin/umi-plugin-react.html#dynamicimport\"}},[_vm._v(\"dynamicImport\")]),_vm._ssrNode(\".\")],2),_vm._ssrNode(\" <div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n  plugins<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">'umi-plugin-react'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n      dynamicImport<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div>\"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"See the parameter \"),_c('router-link',{attrs:{\"to\":\"/plugin/umi-plugin-react.html#dynamicimport\"}},[_vm._v(\"umi-plugin-react#dynamicImport\")]),_vm._ssrNode(\" for details.\")],2),_vm._ssrNode(\" <h2 id=\\\"static-resources-in-non-root-directory-or-cdn\\\"><a href=\\\"#static-resources-in-non-root-directory-or-cdn\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Static Resources in Non-Root Directory or CDN</h2> \"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"At this point, you need to configure \"),_c('router-link',{attrs:{\"to\":\"/config/#publicPath\"}},[_vm._v(\"publicPath\")]),_vm._ssrNode(\". As for publicPath, what? Look at the \"),_vm._ssrNode(\"<a href=\\\"https://webpack.js.org/configuration/output/#output-publicpath\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\",\"</a>\",[_vm._ssrNode(\"webpack documentation\"),_c('OutboundLink')],2),_vm._ssrNode(\" and point it to the path where the static resources (js, css, images, fonts, etc.) are located.\")],2),_vm._ssrNode(\" <div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n  publicPath<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">&quot;http://yourcdn/path/to/static/&quot;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre></div><h2 id=\\\"using-the-publicpath-of-runtime\\\"><a href=\\\"#using-the-publicpath-of-runtime\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Using the publicPath of Runtime</h2> \"),_vm._ssrNode(\"<p>\",\"</p>\",[_vm._ssrNode(\"For scenes that need to manage publicPath in html, such as judging the environment to make different output in html, you can solve it by configuring \"),_c('router-link',{attrs:{\"to\":\"/config/#runtimepublicpath\"}},[_vm._v(\"runtimePublicPath\")]),_vm._ssrNode(\".\")],2),_vm._ssrNode(\" <div class=\\\"language-bash extra-class\\\"><pre class=\\\"language-bash\\\"><code><span class=\\\"token function\\\">export</span> default <span class=\\\"token punctuation\\\">{</span>\\n  runtimePublicPath: true,\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre></div><p>Then output in html:</p> <div class=\\\"language-html extra-class\\\"><pre class=\\\"language-html\\\"><code><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>script</span><span class=\\\"token punctuation\\\">&gt;</span></span><span class=\\\"token script language-javascript\\\">\\nwindow<span class=\\\"token punctuation\\\">.</span>publicPath <span class=\\\"token operator\\\">=</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">%=</span> <span class=\\\"token constant\\\">YOUR_PUBLIC_PATH</span> <span class=\\\"token operator\\\">%</span><span class=\\\"token operator\\\">&gt;</span>\\n</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>script</span><span class=\\\"token punctuation\\\">&gt;</span></span>\\n</code></pre></div><h2 id=\\\"static\\\"><a href=\\\"#static\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Static</h2> <p>In some scenarios, you can't do html fallback on the server side, that is, let each route output the contents of index.html, then it needs to be static.</p> <p>For example, in the above example, we configured in .umirc.js:</p> <div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n  exportStatic<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre></div><p>Then execute the umi build and output an html file for each route.</p> <div class=\\\"language- extra-class\\\"><pre class=\\\"language-text\\\"><code>./dist\\n├── index.html\\n├── list\\n│   └── index.html\\n└── static\\n    ├── pages__index.5c0f5f51.async.js\\n    ├── pages__list.f940b099.async.js\\n    ├── umi.2eaebd79.js\\n    └── umi.f4cb51da.css\\n</code></pre></div><blockquote><p>Note: Statics does not support scenarios with variable routing.</p></blockquote> <h2 id=\\\"html-suffix\\\"><a href=\\\"#html-suffix\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> HTML Suffix</h2> <p>In some static scenarios, the index file is not automatically read, such as Alipay's container environment, then this html file cannot be generated.</p> <div class=\\\"language- extra-class\\\"><pre class=\\\"language-text\\\"><code>├── index.html\\n├── list\\n│   └── index.html\\n</code></pre></div><p>But generate,</p> <div class=\\\"language- extra-class\\\"><pre class=\\\"language-text\\\"><code>├── index.html\\n└── list.html\\n</code></pre></div><p>The configuration is in .umirc.js,</p> <div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n   exportStatic<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n     htmlSuffix<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n   <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre></div><p>Umi build will generate,</p> <div class=\\\"language- extra-class\\\"><pre class=\\\"language-text\\\"><code>./dist\\n├── index.html\\n├── list.html\\n└── static\\n     ├── pages__index.5c0f5f51.async.js\\n     ├── pages__list.f940b099.async.js\\n     ├── umi.2924fdb7.js\\n     └── umi.cfe3ffab.css\\n</code></pre></div><h2 id=\\\"statically-output-to-any-path\\\"><a href=\\\"#statically-output-to-any-path\\\" aria-hidden=\\\"true\\\" class=\\\"header-anchor\\\">#</a> Statically Output to Any Path</h2> <div class=\\\"language-js extra-class\\\"><pre class=\\\"language-js\\\"><code><span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">{</span>\\n  exportStatic<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n    htmlSuffix<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n    dynamicRoot<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre></div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"]}