{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{182:function(e,t,n){\"use strict\";n.r(t);var i=n(0),a=Object(i.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"content\"},[e._m(0),e._v(\" \"),n(\"blockquote\",[n(\"p\",[e._v(\"More like watching videos? You can \"),n(\"a\",{attrs:{href:\"https://youtu.be/1mvKzFLLBck\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"click here to watch\"),n(\"OutboundLink\")],1),e._v(\".\")])]),e._v(\" \"),n(\"p\",[e._v(\"Let's take an example of \"),n(\"a\",{attrs:{href:\"https://github.com/zuiidea/antd-admin/pull/877\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"antd-admin\"),n(\"OutboundLink\")],1),e._v(\" to update from umi@1 to umi@2.\")]),e._v(\" \"),e._m(1),e._v(\" \"),e._m(2),e._v(\" \"),e._m(3),n(\"p\",[e._v(\"Umi-plugin-react is a collection of more than a dozen plugins, as described in \"),n(\"router-link\",{attrs:{to:\"/plugin/umi-plugin-react.html\"}},[e._v(\"Introduction to umi-plugin-react\")]),e._v(\".\")],1),e._v(\" \"),e._m(4),e._v(\" \"),e._m(5),e._v(\" \"),e._m(6),e._m(7),e._v(\" \"),e._m(8),n(\"p\",[e._v(\"In addition, some environment variables have changed or are no longer supported:\")]),e._v(\" \"),e._m(9),e._v(\" \"),e._m(10),e._v(\" \"),e._m(11),e._v(\" \"),e._m(12),e._v(\" \"),e._m(13),n(\"p\",[e._v(\"For more dll, hardSource, polyfilles, locale, title, etc., refer to \"),n(\"router-link\",{attrs:{to:\"/plugin/umi-plugin-react.html\"}},[e._v(\"umi-plugin-react documentation\")]),e._v(\".\")],1),e._v(\" \"),e._m(14),e._v(\" \"),e._m(15),e._v(\" \"),e._m(16),e._v(\" \"),n(\"p\",[e._v(\"Umi@2 no longer supports \"),n(\"code\",[e._v(\"webpack.config.js\")]),e._v(\", instead it is implemented by configuring \"),n(\"router-link\",{attrs:{to:\"/config/#chainwebpack\"}},[e._v(\"chainWebpack\")]),e._v(\".\")],1),e._v(\" \"),e._m(17),e._v(\" \"),e._m(18),e._v(\" \"),e._m(19),e._v(\" \"),e._m(20),e._v(\" \"),e._m(21),e._v(\" \"),n(\"p\",[e._v(\"Interface changes, umi@2 is based on \"),n(\"a\",{attrs:{href:\"https://github.com/jamiebuilds/react-loadable\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"react-loadable\"),n(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),e._m(22),n(\"p\",[e._v(\"See \"),n(\"router-link\",{attrs:{to:\"/api/#umi-dynamic\"}},[e._v(\"umi/dynamic Interface Description\")]),e._v(\" for details.\")],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t(\"h1\",{attrs:{id:\"migrate-from-umi-1-x\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#migrate-from-umi-1-x\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Migrate from umi 1.x\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"npm-dependency\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#npm-dependency\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" npm Dependency\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Upgrade umi to \"),t(\"code\",[this._v(\"^2.0.0-0\")]),this._v(\" and use umi-plugin-react instead of the previous plugins, including umi-plugin-dva, umi-plugin-dll, umi-plugin-routes, umi-plugin-polyfill and Umi-plugin-locale.\")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"language-diff extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-diff\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[e._v('- \"umi\": \"^1.3.17\",')]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[e._v('+ \"umi\": \"^2.0.0-beta.16\",')]),e._v(\"\\n\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[e._v('- \"umi-plugin-dll\": \"^0.2.1\",')]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[e._v('- \"umi-plugin-dva\": \"^0.9.1\",')]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[e._v('- \"umi-plugin-routes\": \"^0.1.5\"')]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[e._v('+ \"umi-plugin-react\": \"^1.0.0-beta.16\",')]),e._v(\"\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"environment-variables\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#environment-variables\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Environment Variables\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Umi@2 supports configuring environment variables in \"),t(\"code\",[this._v(\".env\")]),this._v(\", so the environment variables previously written in package.json scripts can be cut here.\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language-diff extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-diff\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[this._v('- \"start\": \"cross-env COMPILE_ON_DEMAND=none BROWSER=none HOST=0.0.0.0 umi dev\",')]),this._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[this._v('+ \"start\": \"cross-env BROWSER=none HOST=0.0.0.0 umi dev\",')]),this._v(\"\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Then create a new \"),t(\"code\",[this._v(\".env\")]),this._v(\", (where \"),t(\"code\",[this._v(\"COMPILE_ON_DEMAND\")]),this._v(\" is no longer supported)\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[this._v(\"BROWSER=none\\nHOST=0.0.0.0\\n\")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ul\",[n(\"li\",[n(\"code\",[e._v(\"PUBLIC_PATH\")]),e._v(\" is no longer supported, configured by \"),n(\"code\",[e._v(\"publicPath\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"BASE_URL\")]),e._v(\" is no longer supported, configured by \"),n(\"code\",[e._v(\"base\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"COMPILE_ON_DEMAND\")]),e._v(\" is no longer supported, and this function is not available in umi@2.\")]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"TSLINT\")]),e._v(\" is no longer supported, and this function is not available in umi@2.\")]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"ESLINT\")]),e._v(\" is no longer supported, and this function is not available in umi@2.\")])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"configuration\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#configuration\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Configuration\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h3\",{attrs:{id:\"plugin-configuration\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#plugin-configuration\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Plugin Configuration\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Since we changed a lot of plugins to umi-plugin-react, we need to modify \"),t(\"code\",[this._v(\".umirc.js\")]),this._v(\".\")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"language-diff extra-class\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-diff\"}},[n(\"code\",[e._v(\"export default {\\n  plugins: [\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[e._v(\"-    'umi-plugin-dva',\")]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[e._v(\"+    ['umi-plugin-react', {\")]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[e._v(\"+      dva: true,\")]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[e._v(\"+      antd: true,  // antd is not enabled by default, if you need to use it yourself\")]),e._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[e._v(\"+    }],\")]),e._v(\"\\n  ],\\n};\\n\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h3\",{attrs:{id:\"webpackrc-js\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#webpackrc-js\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" webpackrc.js\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"Umi@2 no longer supports \"),t(\"code\",[this._v(\"webpackrc.js\")]),this._v(\", copy the configuration inside it to \"),t(\"code\",[this._v(\".umirc.js\")]),this._v(\".\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h3\",{attrs:{id:\"webpack-config-js\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#webpack-config-js\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" webpack.config.js\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h3\",{attrs:{id:\"detailed-configuration-item-changes\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#detailed-configuration-item-changes\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Detailed Configuration Item Changes\")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"ul\",[n(\"li\",[n(\"code\",[e._v(\"hd\")]),e._v(\" is no longer supported. To enable it, load the plugin \"),n(\"code\",[e._v(\"umi-plugin-react\")]),e._v(\" and configure \"),n(\"code\",[e._v(\"hd: {}\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"disableServiceWorker\")]),e._v(\" is no longer supported, it is not enabled by default. To enable it, load the plugin \"),n(\"code\",[e._v(\"umi-plugin-react\")]),e._v(\" and configure \"),n(\"code\",[e._v(\"pwa: {}\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"preact\")]),e._v(\" is no longer supported. To configure, load the plugin \"),n(\"code\",[e._v(\"umi-plugin-react\")]),e._v(\" and configure `library: 'preact'.\")]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"loading\")]),e._v(\" is no longer supported. To configure, load the plugin \"),n(\"code\",[e._v(\"umi-plugin-react\")]),e._v(\" and configure \"),n(\"code\",[e._v(\"dynamicImport.loadingComponent\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"hashHistory: true\")]),e._v(\" changed to \"),n(\"code\",[e._v(\"history: 'hash'\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"disableDynamicImport\")]),e._v(\" is no longer supported, it is not enabled by default. To enable it, load the plugin \"),n(\"code\",[e._v(\"umi-plugin-react\")]),e._v(\" and configure \"),n(\"code\",[e._v(\"dynamicImport: {}\")])]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"disableFastClick\")]),e._v(\" is no longer supported, it is not enabled by default. To enable it, load the plugin \"),n(\"code\",[e._v(\"umi-plugin-react\")]),e._v(\" and configure \"),n(\"code\",[e._v(\"fastClick: {}\")])]),e._v(\" \"),n(\"li\",[e._v(\"No longer supports \"),n(\"code\",[e._v(\"pages\")]),e._v(\", instead of directly on the route\")]),e._v(\" \"),n(\"li\",[n(\"code\",[e._v(\"disableHash\")]),e._v(\" is no longer supported, it is not enabled by default. To enable it, configure \"),n(\"code\",[e._v(\"hash: true\")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"conventional-routing\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#conventional-routing\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" Conventional Routing\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"p\",[this._v(\"The routing layer no longer supports directory-level routing for \"),t(\"code\",[this._v(\"page.js\")]),this._v(\". Previously useful, you need to exclude unwanted routes through umi-plugin-react's routes.exclude.\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"h2\",{attrs:{id:\"umi-dynamic\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#umi-dynamic\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" umi/dynamic\")])},function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"language-diff extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-diff\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token deleted\"}},[this._v(\"- dynamic(async () => {})\")]),this._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token inserted\"}},[this._v(\"+ dynamic({ loader: async () => {}})\")]),this._v(\"\\n\")])])])}],!1,null,null,null);t.default=a.exports}}]);","extractedComments":[]}